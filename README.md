# 汇编语言

> 直接在硬件之上工作的编程语言，首先了解硬件体系结构，才能更有效的应用汇编语言对其编程。与机器语言最接近的计算机语言

## 汇编语言特性

- 效率最高
- 开发驱动程序或嵌入式

## 学习汇编的好处

- CPU 和 Mem 如何工作
- 机器思维

## 机器语言

> 机器指令的集合

一台机器上正确执行的**命令**

- 指令
  - `PUSH AX)` 推进堆栈
  - 机器语言`01010000`

- S = 768 + 12288 - 1280
- 机器码：
  - 101100000000000000000011
  - 000001010000000000110000
  - 001011010000000000000101

## 汇编语言的产生

- 汇编语言的主题是**汇编指令**
- 汇编指令是机器指令的**助记符**

- 机器指令： `1000100111011000`
- 操作：寄存器 `BX` 的内容送到 `AX` 中
- 汇编指令：`MOV AX,BX`

### 寄存器

- CPU可以存储数据的器件，一个CPU中有多个寄存器。
- AX 是其中一个寄存器的代号
- BX 是另一个寄存器的代号

- 计算机只能读懂机器指令，那么如何让计算机执行程序员用汇编指令编写的程序？

programmer -> mov ax,bx(汇编指令) -> 编译器 -> 1000100111011000 -> 计算机

``` sh
# gcc -S main.c -o man.s
```

### 汇编语言的组成

1. 汇编指令（机器码的助记符）
2. 伪指令（有编译器执行）
3. 其他符号（有编译器识别）

CPU工作机制：《编码的奥秘》

汇编语言的指令决定了汇编语言的特性

### 存储器

- 控制整个计算机的运作和进行运算，提供**指令和数据**
- 指令和数据在存储器中存取

- 磁盘上的数据或程序读取到内存，CPU从内存里读取数据和程序并运行并发结果返回到内存中

### 指令和数据

- 在内存或磁盘上，指令和数据没有任何区别，都是二进制信息
- 二进制信息
  - `1000 1001 1101 1000` -> `89D8H` (数据)
  - `1000100111011000` -> `MOV AX,BX` (程序)

### 存储单元

- 存储器被划分为若干个存储单元，每个存储单元从0开始顺序编号
- 一个存储器有128个存储单元，编号从 0 ~ 127

### CPU对存储器的读写

- CPU进行数据的读写，必须和外部器件进行三类信息的交互
  - 1.存储单元的**地址**（地址信息）
  - 2.器件的选择，读或写**命令**（控制信息）
  - 3.读或写的**数据**（数据信息）

- CPU是通过什么地址、数据和控制信息传到存储芯片中的呢？

- 电子计算机能处理、传输的信息都是电信号，电信号当然要用导线传送

- 专门有连接**CPU**和**其他芯片**的导线，通常称为**总线(bus)**
  - 物理上：一根根导线的集合
  - 逻辑上划分为
    - 地址总线
    - 数据总线
    - 控制总线

CPP -------地址总线------- 内存
CPP -------数据总线------- 内存
CPP -------控制总线------- 内存

读的过程：首先通过地址总线发送地址(数据存储的地址)，再通过控制总线发出读指令，在存储器中读方式取地址所在的数据并通过数据总线返回给CPU


写的过程：首先通过地址总线发送地址(数据存储的地址)，再通过控制总线发出写指令，CPU通过数据总线发送数据并覆盖地址总线发送的地址所对应的数据
